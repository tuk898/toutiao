{"remainingRequest":"D:\\泽林头条\\toutiao\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\泽林头条\\toutiao\\src\\components\\News\\News.vue?vue&type=style&index=0&lang=less&","dependencies":[{"path":"D:\\泽林头条\\toutiao\\src\\components\\News\\News.vue","mtime":1592557760726},{"path":"D:\\泽林头条\\toutiao\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\泽林头条\\toutiao\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"D:\\泽林头条\\toutiao\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"D:\\泽林头条\\toutiao\\node_modules\\less-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\泽林头条\\toutiao\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\泽林头条\\toutiao\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKDQoNCi5tYWluIHsNCiAgICBtYXJnaW4tYm90dG9tOiAxMjBweDsNCiAgLy8gaGVpZ2h0OiAzMDBweDsNCiAgd2lkdGg6IDEwMCU7DQogIGJvcmRlcjogMXB4IHNvbGlkICNkZGQ7DQoNCiAgLm1haW4tY29udGVudCB7DQogICAgLmNvbnRlbnQtdG9wIHsNCiAgICAgIGRpc3BsYXk6IGZsZXg7DQogICAgICBoZWlnaHQ6IDQwcHg7DQogICAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgI2RkZDsNCiAgICAgIGZvbnQtd2VpZ2h0OiA1MDA7DQoNCiAgICAgIC5pdGVtLWxlZnQgew0KICAgICAgICBtYXJnaW4tbGVmdDogMjBweDsNCiAgICAgICAgaGVpZ2h0OiA0MHB4Ow0KICAgICAgICB3aWR0aDogNjBweDsNCiAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyOw0KICAgICAgICBsaW5lLWhlaWdodDogNDBweDsNCiAgICAgIH0NCiAgICAgIC5hY3RpdmUgew0KICAgICAgICBjb2xvcjogIzg5YmJmZjsNCiAgICAgICAgYm9yZGVyLWJvdHRvbTogMnB4IHNvbGlkICNmMThkOGQ7DQogICAgICB9DQogICAgfQ0KICAgIC50YWItY29udGVudCB7DQogICAgICAuY29udGVudC10b3V0aWFvIHsNCiAgICAgICAgdGV4dGFyZWEgew0KICAgICAgICAgIGhlaWdodDogMjAwcHg7DQogICAgICAgICAgd2lkdGg6IDEwMCU7DQogICAgICAgICAgcmVzaXplOiBub25lOw0KICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNmNGY1ZjY7DQogICAgICAgICAgYm9yZGVyOiAwOw0KICAgICAgICB9DQoNCiAgICAgICAgLmJvdHRvbS10b3V0aWFvIHsNCiAgICAgICAgICBkaXNwbGF5OiBmbGV4Ow0KICAgICAgICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjsNCg0KICAgICAgICAgIC5sZWZ0IHsNCiAgICAgICAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlOw0KICAgICAgICAgICAgLmxlZnQtdGl0bGUgew0KICAgICAgICAgICAgICAgICAgIGhlaWdodDogNTBweDsNCiAgICAgICAgICAgIGxpbmUtaGVpZ2h0OiA1MHB4Ow0KICAgICAgICAgICANCiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTZweDsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgLnVwbG9hZC1pbWdzIHsNCiAgICAgICAgICAgICAgICAgICBtYXJnaW4tdG9wOiA1cHg7ICANCiAgICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZjsNCiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7DQogICAgICAgICAgICBmbGV4LXdyYXA6IHdyYXA7DQogICAgICAgICAgICB3aWR0aDogMzAwcHg7DQogICAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7DQogICAgICAgICAgICAgIC51cGxvYWQgew0KICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTsNCiAgICAgICAgICAgICAgd2lkdGg6IDEwMHB4Ow0KICAgICAgICAgICAgICBoZWlnaHQ6IDEwMHB4Ow0KICAgICAgICAgICAgICAgIC50aXRsZSB7DQogICAgICAgICAgICAgICAgICBmb250LXNpemU6IDUwcHg7DQogICAgICAgICAgICAgICAgbGluZS1oZWlnaHQ6IDEwMHB4Ow0KICAgICAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjsNCiAgICAgICAgICAgICAgICB3aWR0aDogMTAwcHg7DQogICAgICAgICAgICAgICAgaGVpZ2h0OiAxMDBweDsNCiAgICAgICAgICAgICAgICBib3JkZXI6IDFweCBkYXNoZWQgI2RkZDsNCiAgICAgICAgICAgICAgICBmb250LXdlaWdodDogMTAwOw0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIGlucHV0IHsNCiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMDsNCiAgICAgICAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7DQogICAgICAgICAgICAgICAgdG9wOiAwOw0KICAgICAgICAgICAgICAgIGxlZnQ6IDA7DQogICAgICAgICAgICAgICAgd2lkdGg6IDEwMCU7DQogICAgICAgICAgICAgICAgaGVpZ2h0OiAxMDAlOyAgDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAuaW1nLWl0ZW0gew0KICAgICAgICAgICANCiAgICAgICAgICAgICAgd2lkdGg6IDEwMHB4Ow0KICAgICAgICAgICAgICBoZWlnaHQ6IDEwMHB4Ow0KICAgICAgICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7DQogICAgICAgICAgICAgIGltZyB7DQogICAgICAgICAgICAgICAgaGVpZ2h0OiAxMDAlOw0KICAgICAgICAgICAgICAgIHdpZHRoOiAxMDBweDsNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAuZGVsZXRlSW1nIHsNCiAgICAgICAgICAgICAgICBkaXNwbGF5OiBub25lOw0KICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsNCiAgICAgICAgICAgICAgICB0b3A6IDUwJTsNCiAgICAgICAgICAgICAgICBsZWZ0OiA1MCU7DQogICAgICAgICAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGUoLTUwJSwgLTUwJSk7DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgJjpob3ZlciB7DQogICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogIzdmN2Y3ZjsNCiAgICAgICAgICAgICAgICBvcGFjaXR5OiAwLjg7DQogICAgICAgICAgICAgICAgdHJhbnNpdGlvbjogYWxsIDAuNXM7DQogICAgICAgICAgICAgICAgLmRlbGV0ZUltZyB7DQogICAgICAgICAgICAgICAgICBjb2xvcjogd2hpdGU7DQogICAgICAgICAgICAgICAgICBkaXNwbGF5OiBibG9jazsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9DQoNCiAgICAgICAgICAucmlnaHQgew0KICAgICAgICAgICAgICB3aWR0aDogMTAwcHg7DQogICAgICAgICAgICAgIGhlaWdodDogNTBweDsNCiAgICAgICAgICAgICAgbGluZS1oZWlnaHQ6IDUwcHg7DQogICAgICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7DQogICAgICAgICAgY29sb3I6IHdoaXRlOw0KICAgICAgICAgIGZvbnQtc2l6ZTogMTZweDsNCiAgICAgICAgICBiYWNrZ3JvdW5kOiAjZWQ4YjhlOw0KICAgICAgICAgICAgICANCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgIH0NCg0KICAgICAgLmNvbnRlbnQtbGl1eWFuIHsNCiAgICAgICAgIA0KICAgICAgICBpbnB1dCB7DQogICAgICAgICAgICBoZWlnaHQ6IDQwcHg7DQogICAgICAgICAgICB3aWR0aDogMTAwJTsNCiAgICAgICAgICAgIGJvcmRlcjogMHB4Ow0KICAgICAgICB9DQoNCiAgICAgICAgdnVlLWVkaXRvciNlZGl0b3IucmljaC1lZGl0b3Igew0KICAgICAgICANCiAgICAgICAgfQ0KICAgICAgICAgIC5yaWdodC1wdXNoIHsNCiAgICAgICAgICAgDQogICAgICAgICAgICAgIGhlaWdodDogNTBweDsNCiAgICAgICAgICAgICAgd2lkdGg6IDEwMHB4Ow0KICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZWE0MjQ1Ow0KICAgICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7DQogICAgICAgICAgICAgIGxpbmUtaGVpZ2h0OiA1MHB4Ow0KICAgICAgICAgICAgICBmbG9hdDogcmlnaHQ7DQogICAgICAgICAgICAgIGNvbG9yOiB3aGl0ZTsNCiAgICAgICAgICB9DQogICAgICB9DQogICAgfQ0KICB9DQp9DQo="},{"version":3,"sources":["News.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoKA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"News.vue","sourceRoot":"src/components/News","sourcesContent":["<template>\r\n  <!-- index的中间部分 -->\r\n  <div class=\"main\">\r\n    <div class=\"main-content\">\r\n      <div class=\"content-top\">\r\n        <div\r\n          @click=\"swithchTab(tab.id)\"\r\n          :class=\"['item-left',{'active':tab.id==activeTab}]\"\r\n          v-for=\"tab in tabs\"\r\n          :key=\"tab.id\"\r\n        >{{tab.text}}</div>\r\n      </div>\r\n      <!-- 发留言部分开始 -->\r\n      <div class=\"tab-content\">\r\n        <div class=\"content-toutiao\" v-show=\"activeTab=='1'\">\r\n          <textarea name id cols=\"30\" v-model=\"tt_content\" rows=\"10\" placeholder=\"有什么新鲜事想告诉大家\"></textarea>\r\n          <div class=\"bottom-toutiao\">\r\n            <div class=\"left\">\r\n              <div class=\"left-title\" @click.stop=\"toggleUploadArea\">图片</div>\r\n              <div class=\"upload-imgs\" v-show=\"showUploadImgArea\">\r\n                <div class=\"upload\">\r\n                  <div class=\"title\">+</div>\r\n                  <input type=\"file\" @change=\"handleImgsUpload\" accept=\".jpg, .png\" />\r\n                </div>\r\n                 <!-- 上传的图片的地方开始 -->\r\n                <div class=\"img-item\" v-for=\"(img,index) in uploadImgs\" :key=\"img\">\r\n                  <img :src=\"img\" alt />\r\n                  <div class=\"deleteImg\" @click.stop=\"deleteImg(index)\">X</div>\r\n                </div>\r\n                 <!-- 上传的图片的地方结束 -->\r\n              </div>\r\n            </div>\r\n            <div class=\"right\" @click.stop=\"publishTT\">发布</div>\r\n          </div>\r\n        </div>\r\n        <div class=\"content-liuyan\" v-show=\"activeTab=='2'\">\r\n          <input type=\"text\" v-model=\"article_title\" placeholder=\"请输入内容\" />\r\n          <vue-editor \r\n          id=\"editor\"\r\n          use-custom-image-hander\r\n          @image-add=\"handerImageAdded\"\r\n          v-model=\"richContent\"\r\n          class=\"rich-editor\"\r\n          />\r\n          <div class=\"right-push\" @click.stop=\"publishArticle\">发布</div>\r\n        </div>\r\n      </div>\r\n      <!-- 发留言部分结束 -->\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { VueEditor } from \"vue2-editor\";\r\nimport { mapState } from \"vuex\";\r\nimport { mapMutations } from \"vuex\";\r\nexport default {\r\n    components:{\r\n        VueEditor\r\n\r\n    },\r\n  data() {\r\n    return {\r\n        \r\n      tabs: [\r\n        { id: \"1\", text: \"发头条\" },\r\n        { id: \"2\", text: \"写文章\" }\r\n      ],\r\n      article_title:\"\",\r\n      tt_content:\"\",\r\n      activeTab: \"1\",\r\n      showUploadImgArea:false, //隐藏\r\n      uploadImgs:[],\r\n      richContent:\"\"//富文本编辑器的内容值\r\n    };\r\n  },\r\n  methods: {\r\n    // 发布头条\r\n    publishTT:function(){\r\n      let content = this.tt_content;\r\n      if(!content){\r\n        this.$message({\r\n          message:\"头条内容不能为空\"\r\n        })\r\n        return false\r\n      }\r\n      this.$axios\r\n      .post(\"/createTT\",{\r\n        content: tt_content,\r\n        imgs:this.uploadImgs.join(\",\")\r\n      })\r\n      .then(res =>{\r\n        this.$message({\r\n          message:res.msg\r\n        })\r\n      })\r\n      .catch(err => err)\r\n    },\r\n\r\n    //   发布文章文章\r\n        publishArticle:function(){\r\n          if (!this.article_title||!this.richContent) {\r\n            this.$message({\r\n              message:\"标题不能为空\"\r\n            })\r\n            return false\r\n          }\r\n          this.$axios.post(\"/createArticle\",{\r\n            content: this.richContent,\r\n            img:\"\",\r\n            title:this.article_title\r\n          })\r\n          .then(res =>{\r\n            this.$message({\r\n              message:res.msg\r\n            })\r\n          })\r\n        },\r\n    //   图片删除\r\n    deleteImg:function(index){\r\n        this.uploadImgs.splice(index, 1);\r\n    },\r\n    // 图片接口\r\n    handerImageAdded:function(file,Editor){\r\n        var forData = new FormData()\r\n        forEach.append = (\"file\",file);\r\n        this.$axios.post(\"/aliossUpload\",formData).then(res =>{\r\n            let url = res.url;\r\n           Editor.insertEmbed(cursorLocation,\"image\",url)\r\n             \r\n        })\r\n    },\r\n    //   文件上传\r\n       handleImgsUpload:function(e){\r\n            // console.log(e)\r\n        Array.from(e.target.files).forEach(f=>{\r\n            // 1.构造请求参数\r\n            // {file:文件的数据}\r\n            let params = new FormData();\r\n            params.append(\"file\",f);\r\n            // 2.发请求\r\n             this.$axios.post(\"/aliossUpload\",params).then(res=>{\r\n                 this.uploadImgs.push(res.url)\r\n                //  console.log(res.url)\r\n             })\r\n        })\r\n        // console.log(f)\r\n       },\r\n    //   切换是否显示\r\n    toggleUploadArea:function(){\r\n        this.showUploadImgArea = !this.showUploadImgArea\r\n    },\r\n    // 跳转发头条,写文章信息\r\n    swithchTab: function(id) {\r\n      this.activeTab = id;\r\n    }\r\n\r\n  },\r\n\r\n};\r\n</script>\r\n\r\n<style lang='less' >\r\n\r\n.main {\r\n    margin-bottom: 120px;\r\n  // height: 300px;\r\n  width: 100%;\r\n  border: 1px solid #ddd;\r\n\r\n  .main-content {\r\n    .content-top {\r\n      display: flex;\r\n      height: 40px;\r\n      border-bottom: 1px solid #ddd;\r\n      font-weight: 500;\r\n\r\n      .item-left {\r\n        margin-left: 20px;\r\n        height: 40px;\r\n        width: 60px;\r\n        text-align: center;\r\n        line-height: 40px;\r\n      }\r\n      .active {\r\n        color: #89bbff;\r\n        border-bottom: 2px solid #f18d8d;\r\n      }\r\n    }\r\n    .tab-content {\r\n      .content-toutiao {\r\n        textarea {\r\n          height: 200px;\r\n          width: 100%;\r\n          resize: none;\r\n          background-color: #f4f5f6;\r\n          border: 0;\r\n        }\r\n\r\n        .bottom-toutiao {\r\n          display: flex;\r\n          justify-content: space-between;\r\n\r\n          .left {\r\n              position: relative;\r\n            .left-title {\r\n                   height: 50px;\r\n            line-height: 50px;\r\n           \r\n            font-size: 16px;\r\n            }\r\n\r\n            .upload-imgs {\r\n                   margin-top: 5px;  \r\n                 background-color: #fff;\r\n            display: flex;\r\n            flex-wrap: wrap;\r\n            width: 300px;\r\n            position: absolute;\r\n              .upload {\r\n                   position: relative;\r\n              width: 100px;\r\n              height: 100px;\r\n                .title {\r\n                  font-size: 50px;\r\n                line-height: 100px;\r\n                text-align: center;\r\n                width: 100px;\r\n                height: 100px;\r\n                border: 1px dashed #ddd;\r\n                font-weight: 100;\r\n                }\r\n\r\n                input {\r\n                    opacity: 0;\r\n                position: absolute;\r\n                top: 0;\r\n                left: 0;\r\n                width: 100%;\r\n                height: 100%;  \r\n                }\r\n              }\r\n               .img-item {\r\n           \r\n              width: 100px;\r\n              height: 100px;\r\n              position: relative;\r\n              img {\r\n                height: 100%;\r\n                width: 100px;\r\n              }\r\n              .deleteImg {\r\n                display: none;\r\n                position: absolute;\r\n                top: 50%;\r\n                left: 50%;\r\n                transform: translate(-50%, -50%);\r\n              }\r\n              &:hover {\r\n                background-color: #7f7f7f;\r\n                opacity: 0.8;\r\n                transition: all 0.5s;\r\n                .deleteImg {\r\n                  color: white;\r\n                  display: block;\r\n                }\r\n              }\r\n            }\r\n            }\r\n          }\r\n\r\n          .right {\r\n              width: 100px;\r\n              height: 50px;\r\n              line-height: 50px;\r\n               text-align: center;\r\n          color: white;\r\n          font-size: 16px;\r\n          background: #ed8b8e;\r\n              \r\n          }\r\n        }\r\n      }\r\n\r\n      .content-liuyan {\r\n         \r\n        input {\r\n            height: 40px;\r\n            width: 100%;\r\n            border: 0px;\r\n        }\r\n\r\n        vue-editor#editor.rich-editor {\r\n        \r\n        }\r\n          .right-push {\r\n           \r\n              height: 50px;\r\n              width: 100px;\r\n              background-color: #ea4245;\r\n              text-align: center;\r\n              line-height: 50px;\r\n              float: right;\r\n              color: white;\r\n          }\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>"]}]}