{"remainingRequest":"D:\\泽林头条\\toutiao\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\泽林头条\\toutiao\\src\\components\\News\\News.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\泽林头条\\toutiao\\src\\components\\News\\News.vue","mtime":1592557774366},{"path":"D:\\泽林头条\\toutiao\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\泽林头条\\toutiao\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\泽林头条\\toutiao\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\泽林头条\\toutiao\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBWdWVFZGl0b3IgfSBmcm9tICJ2dWUyLWVkaXRvciI7DQppbXBvcnQgeyBtYXBTdGF0ZSB9IGZyb20gInZ1ZXgiOw0KaW1wb3J0IHsgbWFwTXV0YXRpb25zIH0gZnJvbSAidnVleCI7DQpleHBvcnQgZGVmYXVsdCB7DQogICAgY29tcG9uZW50czp7DQogICAgICAgIFZ1ZUVkaXRvcg0KDQogICAgfSwNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgICANCiAgICAgIHRhYnM6IFsNCiAgICAgICAgeyBpZDogIjEiLCB0ZXh0OiAi5Y+R5aS05p2hIiB9LA0KICAgICAgICB7IGlkOiAiMiIsIHRleHQ6ICLlhpnmlofnq6AiIH0NCiAgICAgIF0sDQogICAgICBhcnRpY2xlX3RpdGxlOiIiLA0KICAgICAgdHRfY29udGVudDoiIiwNCiAgICAgIGFjdGl2ZVRhYjogIjEiLA0KICAgICAgc2hvd1VwbG9hZEltZ0FyZWE6ZmFsc2UsIC8v6ZqQ6JePDQogICAgICB1cGxvYWRJbWdzOltdLA0KICAgICAgcmljaENvbnRlbnQ6IiIvL+WvjOaWh+acrOe8lui+keWZqOeahOWGheWuueWAvA0KICAgIH07DQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICAvLyDlj5HluIPlpLTmnaENCiAgICBwdWJsaXNoVFQ6ZnVuY3Rpb24oKXsNCiAgICAgIGxldCBjb250ZW50ID0gdGhpcy50dF9jb250ZW50Ow0KICAgICAgaWYoIWNvbnRlbnQpew0KICAgICAgICB0aGlzLiRtZXNzYWdlKHsNCiAgICAgICAgICBtZXNzYWdlOiLlpLTmnaHlhoXlrrnkuI3og73kuLrnqboiDQogICAgICAgIH0pDQogICAgICAgIHJldHVybiBmYWxzZQ0KICAgICAgfQ0KICAgICAgdGhpcy4kYXhpb3MNCiAgICAgIC5wb3N0KCIvY3JlYXRlVFQiLHsNCiAgICAgICAgY29udGVudDogY29udGVudCwNCiAgICAgICAgaW1nczp0aGlzLnVwbG9hZEltZ3Muam9pbigiLCIpDQogICAgICB9KQ0KICAgICAgLnRoZW4ocmVzID0+ew0KICAgICAgICB0aGlzLiRtZXNzYWdlKHsNCiAgICAgICAgICBtZXNzYWdlOnJlcy5tc2cNCiAgICAgICAgfSkNCiAgICAgIH0pDQogICAgICAuY2F0Y2goZXJyID0+IGVycikNCiAgICB9LA0KDQogICAgLy8gICDlj5HluIPmlofnq6Dmlofnq6ANCiAgICAgICAgcHVibGlzaEFydGljbGU6ZnVuY3Rpb24oKXsNCiAgICAgICAgICBpZiAoIXRoaXMuYXJ0aWNsZV90aXRsZXx8IXRoaXMucmljaENvbnRlbnQpIHsNCiAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uoew0KICAgICAgICAgICAgICBtZXNzYWdlOiLmoIfpopjkuI3og73kuLrnqboiDQogICAgICAgICAgICB9KQ0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlDQogICAgICAgICAgfQ0KICAgICAgICAgIHRoaXMuJGF4aW9zLnBvc3QoIi9jcmVhdGVBcnRpY2xlIix7DQogICAgICAgICAgICBjb250ZW50OiB0aGlzLnJpY2hDb250ZW50LA0KICAgICAgICAgICAgaW1nOiIiLA0KICAgICAgICAgICAgdGl0bGU6dGhpcy5hcnRpY2xlX3RpdGxlDQogICAgICAgICAgfSkNCiAgICAgICAgICAudGhlbihyZXMgPT57DQogICAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsNCiAgICAgICAgICAgICAgbWVzc2FnZTpyZXMubXNnDQogICAgICAgICAgICB9KQ0KICAgICAgICAgIH0pDQogICAgICAgIH0sDQogICAgLy8gICDlm77niYfliKDpmaQNCiAgICBkZWxldGVJbWc6ZnVuY3Rpb24oaW5kZXgpew0KICAgICAgICB0aGlzLnVwbG9hZEltZ3Muc3BsaWNlKGluZGV4LCAxKTsNCiAgICB9LA0KICAgIC8vIOWbvueJh+aOpeWPow0KICAgIGhhbmRlckltYWdlQWRkZWQ6ZnVuY3Rpb24oZmlsZSxFZGl0b3Ipew0KICAgICAgICB2YXIgZm9yRGF0YSA9IG5ldyBGb3JtRGF0YSgpDQogICAgICAgIGZvckVhY2guYXBwZW5kID0gKCJmaWxlIixmaWxlKTsNCiAgICAgICAgdGhpcy4kYXhpb3MucG9zdCgiL2FsaW9zc1VwbG9hZCIsZm9ybURhdGEpLnRoZW4ocmVzID0+ew0KICAgICAgICAgICAgbGV0IHVybCA9IHJlcy51cmw7DQogICAgICAgICAgIEVkaXRvci5pbnNlcnRFbWJlZChjdXJzb3JMb2NhdGlvbiwiaW1hZ2UiLHVybCkNCiAgICAgICAgICAgICANCiAgICAgICAgfSkNCiAgICB9LA0KICAgIC8vICAg5paH5Lu25LiK5LygDQogICAgICAgaGFuZGxlSW1nc1VwbG9hZDpmdW5jdGlvbihlKXsNCiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGUpDQogICAgICAgIEFycmF5LmZyb20oZS50YXJnZXQuZmlsZXMpLmZvckVhY2goZj0+ew0KICAgICAgICAgICAgLy8gMS7mnoTpgKDor7fmsYLlj4LmlbANCiAgICAgICAgICAgIC8vIHtmaWxlOuaWh+S7tueahOaVsOaNrn0NCiAgICAgICAgICAgIGxldCBwYXJhbXMgPSBuZXcgRm9ybURhdGEoKTsNCiAgICAgICAgICAgIHBhcmFtcy5hcHBlbmQoImZpbGUiLGYpOw0KICAgICAgICAgICAgLy8gMi7lj5Hor7fmsYINCiAgICAgICAgICAgICB0aGlzLiRheGlvcy5wb3N0KCIvYWxpb3NzVXBsb2FkIixwYXJhbXMpLnRoZW4ocmVzPT57DQogICAgICAgICAgICAgICAgIHRoaXMudXBsb2FkSW1ncy5wdXNoKHJlcy51cmwpDQogICAgICAgICAgICAgICAgLy8gIGNvbnNvbGUubG9nKHJlcy51cmwpDQogICAgICAgICAgICAgfSkNCiAgICAgICAgfSkNCiAgICAgICAgLy8gY29uc29sZS5sb2coZikNCiAgICAgICB9LA0KICAgIC8vICAg5YiH5o2i5piv5ZCm5pi+56S6DQogICAgdG9nZ2xlVXBsb2FkQXJlYTpmdW5jdGlvbigpew0KICAgICAgICB0aGlzLnNob3dVcGxvYWRJbWdBcmVhID0gIXRoaXMuc2hvd1VwbG9hZEltZ0FyZWENCiAgICB9LA0KICAgIC8vIOi3s+i9rOWPkeWktOadoSzlhpnmlofnq6Dkv6Hmga8NCiAgICBzd2l0aGNoVGFiOiBmdW5jdGlvbihpZCkgew0KICAgICAgdGhpcy5hY3RpdmVUYWIgPSBpZDsNCiAgICB9DQoNCiAgfSwNCg0KfTsNCg=="},{"version":3,"sources":["News.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqDA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA","file":"News.vue","sourceRoot":"src/components/News","sourcesContent":["<template>\r\n  <!-- index的中间部分 -->\r\n  <div class=\"main\">\r\n    <div class=\"main-content\">\r\n      <div class=\"content-top\">\r\n        <div\r\n          @click=\"swithchTab(tab.id)\"\r\n          :class=\"['item-left',{'active':tab.id==activeTab}]\"\r\n          v-for=\"tab in tabs\"\r\n          :key=\"tab.id\"\r\n        >{{tab.text}}</div>\r\n      </div>\r\n      <!-- 发留言部分开始 -->\r\n      <div class=\"tab-content\">\r\n        <div class=\"content-toutiao\" v-show=\"activeTab=='1'\">\r\n          <textarea name id cols=\"30\" v-model=\"tt_content\" rows=\"10\" placeholder=\"有什么新鲜事想告诉大家\"></textarea>\r\n          <div class=\"bottom-toutiao\">\r\n            <div class=\"left\">\r\n              <div class=\"left-title\" @click.stop=\"toggleUploadArea\">图片</div>\r\n              <div class=\"upload-imgs\" v-show=\"showUploadImgArea\">\r\n                <div class=\"upload\">\r\n                  <div class=\"title\">+</div>\r\n                  <input type=\"file\" @change=\"handleImgsUpload\" accept=\".jpg, .png\" />\r\n                </div>\r\n                 <!-- 上传的图片的地方开始 -->\r\n                <div class=\"img-item\" v-for=\"(img,index) in uploadImgs\" :key=\"img\">\r\n                  <img :src=\"img\" alt />\r\n                  <div class=\"deleteImg\" @click.stop=\"deleteImg(index)\">X</div>\r\n                </div>\r\n                 <!-- 上传的图片的地方结束 -->\r\n              </div>\r\n            </div>\r\n            <div class=\"right\" @click.stop=\"publishTT\">发布</div>\r\n          </div>\r\n        </div>\r\n        <div class=\"content-liuyan\" v-show=\"activeTab=='2'\">\r\n          <input type=\"text\" v-model=\"article_title\" placeholder=\"请输入内容\" />\r\n          <vue-editor \r\n          id=\"editor\"\r\n          use-custom-image-hander\r\n          @image-add=\"handerImageAdded\"\r\n          v-model=\"richContent\"\r\n          class=\"rich-editor\"\r\n          />\r\n          <div class=\"right-push\" @click.stop=\"publishArticle\">发布</div>\r\n        </div>\r\n      </div>\r\n      <!-- 发留言部分结束 -->\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { VueEditor } from \"vue2-editor\";\r\nimport { mapState } from \"vuex\";\r\nimport { mapMutations } from \"vuex\";\r\nexport default {\r\n    components:{\r\n        VueEditor\r\n\r\n    },\r\n  data() {\r\n    return {\r\n        \r\n      tabs: [\r\n        { id: \"1\", text: \"发头条\" },\r\n        { id: \"2\", text: \"写文章\" }\r\n      ],\r\n      article_title:\"\",\r\n      tt_content:\"\",\r\n      activeTab: \"1\",\r\n      showUploadImgArea:false, //隐藏\r\n      uploadImgs:[],\r\n      richContent:\"\"//富文本编辑器的内容值\r\n    };\r\n  },\r\n  methods: {\r\n    // 发布头条\r\n    publishTT:function(){\r\n      let content = this.tt_content;\r\n      if(!content){\r\n        this.$message({\r\n          message:\"头条内容不能为空\"\r\n        })\r\n        return false\r\n      }\r\n      this.$axios\r\n      .post(\"/createTT\",{\r\n        content: content,\r\n        imgs:this.uploadImgs.join(\",\")\r\n      })\r\n      .then(res =>{\r\n        this.$message({\r\n          message:res.msg\r\n        })\r\n      })\r\n      .catch(err => err)\r\n    },\r\n\r\n    //   发布文章文章\r\n        publishArticle:function(){\r\n          if (!this.article_title||!this.richContent) {\r\n            this.$message({\r\n              message:\"标题不能为空\"\r\n            })\r\n            return false\r\n          }\r\n          this.$axios.post(\"/createArticle\",{\r\n            content: this.richContent,\r\n            img:\"\",\r\n            title:this.article_title\r\n          })\r\n          .then(res =>{\r\n            this.$message({\r\n              message:res.msg\r\n            })\r\n          })\r\n        },\r\n    //   图片删除\r\n    deleteImg:function(index){\r\n        this.uploadImgs.splice(index, 1);\r\n    },\r\n    // 图片接口\r\n    handerImageAdded:function(file,Editor){\r\n        var forData = new FormData()\r\n        forEach.append = (\"file\",file);\r\n        this.$axios.post(\"/aliossUpload\",formData).then(res =>{\r\n            let url = res.url;\r\n           Editor.insertEmbed(cursorLocation,\"image\",url)\r\n             \r\n        })\r\n    },\r\n    //   文件上传\r\n       handleImgsUpload:function(e){\r\n            // console.log(e)\r\n        Array.from(e.target.files).forEach(f=>{\r\n            // 1.构造请求参数\r\n            // {file:文件的数据}\r\n            let params = new FormData();\r\n            params.append(\"file\",f);\r\n            // 2.发请求\r\n             this.$axios.post(\"/aliossUpload\",params).then(res=>{\r\n                 this.uploadImgs.push(res.url)\r\n                //  console.log(res.url)\r\n             })\r\n        })\r\n        // console.log(f)\r\n       },\r\n    //   切换是否显示\r\n    toggleUploadArea:function(){\r\n        this.showUploadImgArea = !this.showUploadImgArea\r\n    },\r\n    // 跳转发头条,写文章信息\r\n    swithchTab: function(id) {\r\n      this.activeTab = id;\r\n    }\r\n\r\n  },\r\n\r\n};\r\n</script>\r\n\r\n<style lang='less' >\r\n\r\n.main {\r\n    margin-bottom: 120px;\r\n  // height: 300px;\r\n  width: 100%;\r\n  border: 1px solid #ddd;\r\n\r\n  .main-content {\r\n    .content-top {\r\n      display: flex;\r\n      height: 40px;\r\n      border-bottom: 1px solid #ddd;\r\n      font-weight: 500;\r\n\r\n      .item-left {\r\n        margin-left: 20px;\r\n        height: 40px;\r\n        width: 60px;\r\n        text-align: center;\r\n        line-height: 40px;\r\n      }\r\n      .active {\r\n        color: #89bbff;\r\n        border-bottom: 2px solid #f18d8d;\r\n      }\r\n    }\r\n    .tab-content {\r\n      .content-toutiao {\r\n        textarea {\r\n          height: 200px;\r\n          width: 100%;\r\n          resize: none;\r\n          background-color: #f4f5f6;\r\n          border: 0;\r\n        }\r\n\r\n        .bottom-toutiao {\r\n          display: flex;\r\n          justify-content: space-between;\r\n\r\n          .left {\r\n              position: relative;\r\n            .left-title {\r\n                   height: 50px;\r\n            line-height: 50px;\r\n           \r\n            font-size: 16px;\r\n            }\r\n\r\n            .upload-imgs {\r\n                   margin-top: 5px;  \r\n                 background-color: #fff;\r\n            display: flex;\r\n            flex-wrap: wrap;\r\n            width: 300px;\r\n            position: absolute;\r\n              .upload {\r\n                   position: relative;\r\n              width: 100px;\r\n              height: 100px;\r\n                .title {\r\n                  font-size: 50px;\r\n                line-height: 100px;\r\n                text-align: center;\r\n                width: 100px;\r\n                height: 100px;\r\n                border: 1px dashed #ddd;\r\n                font-weight: 100;\r\n                }\r\n\r\n                input {\r\n                    opacity: 0;\r\n                position: absolute;\r\n                top: 0;\r\n                left: 0;\r\n                width: 100%;\r\n                height: 100%;  \r\n                }\r\n              }\r\n               .img-item {\r\n           \r\n              width: 100px;\r\n              height: 100px;\r\n              position: relative;\r\n              img {\r\n                height: 100%;\r\n                width: 100px;\r\n              }\r\n              .deleteImg {\r\n                display: none;\r\n                position: absolute;\r\n                top: 50%;\r\n                left: 50%;\r\n                transform: translate(-50%, -50%);\r\n              }\r\n              &:hover {\r\n                background-color: #7f7f7f;\r\n                opacity: 0.8;\r\n                transition: all 0.5s;\r\n                .deleteImg {\r\n                  color: white;\r\n                  display: block;\r\n                }\r\n              }\r\n            }\r\n            }\r\n          }\r\n\r\n          .right {\r\n              width: 100px;\r\n              height: 50px;\r\n              line-height: 50px;\r\n               text-align: center;\r\n          color: white;\r\n          font-size: 16px;\r\n          background: #ed8b8e;\r\n              \r\n          }\r\n        }\r\n      }\r\n\r\n      .content-liuyan {\r\n         \r\n        input {\r\n            height: 40px;\r\n            width: 100%;\r\n            border: 0px;\r\n        }\r\n\r\n        vue-editor#editor.rich-editor {\r\n        \r\n        }\r\n          .right-push {\r\n           \r\n              height: 50px;\r\n              width: 100px;\r\n              background-color: #ea4245;\r\n              text-align: center;\r\n              line-height: 50px;\r\n              float: right;\r\n              color: white;\r\n          }\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>"]}]}